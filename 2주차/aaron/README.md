# 도메인 모델과 BOUNDED CONTEXT

### 도메인 모델과 경계

- 도메인을 완벽하게 표현하는 단일 모델을 만드는 것은 거의 불가능

  ### Example

  - 상품
    - 카탈로그 → 상품 정보가 위주
    - 재고관리 → 실존하는 개별 객체를 추적하기 위한 목적
    - 주문
    - 배송

  → 목적에 따라 같은 모델이 여러 도메인으로 나타난다

논리적으로 같은 존재라도 하위 도메인마다 사용하는 용어가 다르기 때문에 올바른 모델을 개발하기 위해서는 하위 도메인마다 모델을 만들어야 한다.

중요한 것은 명시적으로 구분되는 경계를 가져서 섞이지 않도록 해야한다.

모델은 특정한 컨텍스트 하에서 완전한 의미를 갖는다

→ BOUNDED CONTEXT

### BOUNDED CONTEXT

1. 모델의 경계를 결정
2. 논리적으로 한 개의 모델을 갖음
3. 실제로 사용자에게 기능을 제공하는 물리적 시스템

### 주의할 점

하위 도메인의 모델이 뒤섞이지 않도록 하는 것

→ 도메인 모델이 개별 하위 도메인을 반영하지 못하고 하위 도메인 별 기능 확장이 어렵게 됨

- 구현

  - 도메인 주도 개발 vs 서비스-DAO를 이용한 CRUD

  ### Hybrid

  - Command Query Responsibility Segregation

    → 상태를 변경하는 명령 기능과 내용을 조회하는 쿼리 기능을 위한 모델을 구분하는 패턴

  - UI 서버를 통한 Bounded Context를 위한 Facade 역할을 구성할 수 있음

- 통합
  - 서로 다른 도메인 모델 간 정보교환 필요
  - 인프라스트럭처 영역에서 외부 시스템과의 연동을 처리하고 모델 간의 **변환**을 책임진다

### Method

- 직접 통합 → HTTP REST API
- 간접 통합 → Message Queue

  - 비동기 방식
  - 메세지의 데이터 구조를 맞춰야 함
  - 큐를 제공하는 쪽에 맞춰서 데이터의 구조가 정해짐

- 관계

  - interface를 통한 관계 (ex. REST API)
    - 상류/하류 컴포넌트 → 공급자/고객 역할

  ### UPSTREAM COMPONENT

  - 통신 프로토콜 정의 및 공개
  - 하류 컴포넌트가 다수 존재 시, API를 서비스 형태로 공개하여 일관성 유지 → OPEN HOST SERVICE (ex. 검색)

  ### Anticorruption Layer

  - 외부 시스템의 도메인 모델이 내 도메인 모델을 침범하지 않도록 하는 완충 지대 역할
  - BOUNDED CONTEXT 간의 모델 변환 처리

  ### SHARED KERNER

  - BOUNDED CONTEXT가 같은 모델을 공유할 경우, 공유하는 모델로 사용
  - 중복 제거를 위함
  - 잘못 사용하면, 지연 및 정체의 원인이 됨

  ### SEPARATE WAY

  - BOUNDED CONTEXT간 서로 통합하지 않는 방식
  - 독립적으로 모델 발전
  - 통합은 수동작업
  - 규모가 커짐에 따라서 별도의 시스템을 두어 통합을 처리

### CONTEXT MAP

→ BOUNDED CONTEXT간의 관계를 표시하는 지도

- 시스템의 전체 구조를 보여줌
- 하위 도메인과 일치하지 않는 BOUNDED CONTEXT를 쉽게 찾고 조절 가능
- 집중할 수 있는 영역의 파악이 쉬움
- 시간이 지남에 따라 컨텍스트 간 관계가 바뀌면 함께 바뀜 (수동 update)
